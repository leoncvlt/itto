import{g as x,i as a,c as A,r as l,b as c,t as n}from"./drawing-9f426ad3.js";import{g as M,s as E}from"./store-e8e614c8.js";let f,w,h,o=!1;const s={x:0,y:0,w:32,h:6},e={x:0,y:0,r:4,dx:0,dy:0,speed:0},i=[],p=()=>{f=0,w=M("highscore",0),h=3,m(),S()},m=()=>{s.x=x.width/2-s.w/2,s.y=112,e.x=x.width/2,e.y=98,e.dx=e.dy=e.speed=0},g=()=>{e.dx=Math.random()<.5?-1:1,e.dy=-1,e.speed=1},u=(t,d)=>t.x-t.r<d.x+d.w&&t.x+t.r>d.x&&t.y-t.r<d.y+d.h&&t.y+t.r>d.y,S=()=>{i.length=0;const t=30,d=8;for(let y=0;y<8;y++)for(let r=0;r<6;r++)i.push({x:y*t,y:8+r*d,w:t,h:d,color:r+2})};x.play({settings:{size:[240,136],offset:[96,64],palette:[1711148,6104925,11615827,15695191,16764277,11006064,3716964,2453881,2700911,3890633,4302582,7598071,16053492,9744578,5663878,3357783]},init:()=>{p()},tick:()=>{if(!o)a("A",!1)&&(o=!0,g());else{a("left")&&s.x>0&&(s.x-=2*x.delta),a("right")&&s.x<x.width-s.w&&(s.x+=2*x.delta),e.speed===0?(a("A",!1)&&g(),e.x=s.x+s.w/2):(e.x+=e.dx*e.speed*x.delta,e.y+=e.dy*e.speed*x.delta),u(e,s)&&(e.speed=Math.min(e.speed+.02,2),e.y<s.y&&(e.dy=-Math.abs(e.dy)));for(let t=i.length-1;t>=0;t--)if(u(e,i[t])){e.x+e.r>i[t].x&&e.x-e.r<i[t].x+i[t].w?e.dy*=-1:e.dx*=-1,i.splice(t,1),f++;break}(e.x<0||e.x>x.width)&&(e.dx*=-1),e.y<8&&(e.dy=1),e.y>x.height&&(h>0?h--:(o=!1,f>w&&E("highscore",f),p()),m()),i.length===0&&(S(),p())}},draw:()=>{if(A(13),i.forEach(t=>{l(t.x,t.y,t.w,t.h,t.color)}),c(e.x,e.y,e.r,15),c(e.x+1,e.y-1,e.r/2,14),l(s.x,s.y,s.w,s.h,15),l(0,0,x.width,8,15),!o)n(`TOP ${w.toString().padStart(3,"0")}`,2,7,14),n("Press (A) to start",x.width-2,7,14,{align:"right"});else{n(`SCORE ${f.toString().padStart(3,"0")}`,2,7,14);for(let t=0;t<h;t++)c(x.width-4-t*6,4,2,14)}}});
