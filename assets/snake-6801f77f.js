import{g as d,i as y,c as w,b as a,r as m,t as g}from"./drawing-c070374e.js";import{s as M,g as S}from"./store-e8e614c8.js";let n=0,f,c,s=!0;const t={x:0,y:0,cx:0,cy:0,dx:0,dy:0,speed:0,body:[]},o={x:0,y:0},p=()=>{s=!0,f=0,c=S("highscore",0),Object.assign(t,{x:d.width/2,y:d.height/2-4,cx:0,cy:0,dx:0,dy:0,speed:4,body:[]}),r(),r(),r(),b()},b=()=>{let e,i;for(;!e||!i||u(e,i);)e=Math.floor(Math.random()*(d.width/8))*8,i=Math.floor(Math.random()*(d.height/8))*8;o.x=e,o.y=i},r=()=>{const e=t.body[t.body.length-1]||t;t.body.push({x:e.x,y:e.y})},u=(e,i)=>{for(const x of t.body)if(e===x.x&&i===x.y)return!0;return!1};d.play({settings:{size:[240,136],palette:[1711148,6104925,11615827,15695191,16764277,11006064,3716964,2453881,2700911,3890633,4302582,7598071,16053492,9744578,5663878,3357783]},init:()=>{p()},tick:()=>{if(!s){y()&&p();return}if(t.cy===0&&(y("up")&&(t.dx=0,t.dy=-1),y("down")&&(t.dx=0,t.dy=1)),t.cx===0&&(y("left")&&(t.dx=-1,t.dy=0),y("right")&&(t.dx=1,t.dy=0)),t.x>d.width&&(t.x=0),t.x<0&&(t.x=d.width-8),t.y>d.height-8&&(t.y=8),t.y<8&&(t.y=d.height-8),!(!t.dx&&!t.dy)){if(n+=d.delta,n>60/t.speed){for(let x=t.body.length-1;x>=0;x--){const h=t.body[x],l=x>0?t.body[x-1]:t;h.x=l.x,h.y=l.y}const e=t.x+t.dx*8,i=t.y+t.dy*8;u(e,i)?(s=!1,f>c&&M("highscore",c)):(t.x=e,t.y=i,t.cx=t.dx,t.cy=t.dy),n-=60/t.speed}t.x===o.x&&t.y===o.y&&(r(),b(),f++,t.speed=Math.min(t.speed+.2,10))}},draw:()=>{w(6),a(t.x+4,t.y+4,4,s?7:15),t.body.forEach(e=>{a(e.x+4,e.y+4,4,s?7:15)}),a(o.x+4,o.y+4,4,2),m(0,0,d.width,8,15),g(`SCORE ${f.toString().padStart(3,"0")}`,2,7,14),g(`TOP ${c.toString().padStart(3,"0")}`,d.width-1,7,14,{align:"right"})}});
